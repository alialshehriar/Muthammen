# ๐ ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุจูุงูุงุช Neon - ููุซููู AI

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุฏุงุฏ ุงูุชุทุจูู ููุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช **Neon PostgreSQL**. ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฅุนุฏุงุฏ ูุฑุจุท ุงููุงุนุฏุฉ ุจุงูุชุทุจูู.

---

## 1๏ธโฃ ุฅูุดุงุก ุญุณุงุจ Neon

### ุงูุฎุทูุงุช:

1. ุงุฐูุจ ุฅูู: https://neon.tech
2. ุงุถุบุท "Sign Up" ุฃู "Get Started"
3. ุณุฌู ุฏุฎูู ุจุงุณุชุฎุฏุงู GitHub ุฃู Google
4. ุงุฎุชุฑ ุงูุฎุทุฉ ุงููุฌุงููุฉ (Free Tier)

### ุงููููุฒุงุช ุงููุฌุงููุฉ:
- โ 0.5 GB ุชุฎุฒูู
- โ 191 ุณุงุนุฉ compute ุดูุฑูุงู
- โ Unlimited databases
- โ Branching support

---

## 2๏ธโฃ ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ

### ุงูุฎุทูุงุช:

1. ูู ููุญุฉ ุงูุชุญููุ ุงุถุบุท "Create Project"
2. ุงุฎุชุฑ ุงุณู ุงููุดุฑูุน: `mothammen-production`
3. ุงุฎุชุฑ ุงูููุทูุฉ ุงูุฃูุฑุจ: **AWS - Middle East (Bahrain)**
4. ุงุถุบุท "Create Project"

### ูุณุฎ Connection String:

ุจุนุฏ ุฅูุดุงุก ุงููุดุฑูุนุ ุณุชุญุตู ุนูู **Connection String** ุจูุฐุง ุงูุดูู:

```
postgresql://username:password@ep-xxx-xxx.me-south-1.aws.neon.tech/dbname?sslmode=require
```

**ุงุญูุธ ูุฐุง ุงูุฑุงุจุท!** ุณุชุญุชุงุฌู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ.

---

## 3๏ธโฃ ุชูููุฐ SQL Schema

### ุงูุทุฑููุฉ 1: ุนุจุฑ Neon Console (ููุตู ุจูุง)

1. ูู ููุญุฉ ุชุญูู Neonุ ุงุฐูุจ ุฅูู "SQL Editor"
2. ุงูุชุญ ููู `database/schema.sql` ูู ุงููุดุฑูุน
3. ุงูุณุฎ ูู ุงููุญุชูู ูุงูุตูู ูู SQL Editor
4. ุงุถุบุท "Run" ูุชูููุฐ ุงูู Schema

### ุงูุทุฑููุฉ 2: ุนุจุฑ psql (ูููุชูุฏููู)

```bash
# ุชุซุจูุช PostgreSQL client
brew install postgresql  # macOS
sudo apt install postgresql-client  # Linux

# ุชูููุฐ Schema
psql "YOUR_CONNECTION_STRING" < database/schema.sql
```

---

## 4๏ธโฃ ุฑุจุท ุงูุชุทุจูู ุจู Neon

### ุฅุถุงูุฉ Environment Variables

#### ุฃ. ููุชุทููุฑ ุงููุญูู:

ุฃูุดุฆ ููู `.env.local` ูู ุฌุฐุฑ ุงููุดุฑูุน:

```env
# Neon Database
DATABASE_URL=postgresql://username:password@ep-xxx.me-south-1.aws.neon.tech/dbname?sslmode=require

# Admin API Key (ุงุฎุชุฑ ูููุฉ ุณุฑ ูููุฉ)
ADMIN_API_KEY=your-super-secret-admin-key-here

# Mapbox (ุฅุฐุง ูู ููู ููุฌูุฏ)
VITE_MAPBOX_TOKEN=your_mapbox_token

# OpenAI (ุฅุฐุง ูู ููู ููุฌูุฏ)
VITE_OPENAI_API_KEY=your_openai_key
```

#### ุจ. ููุฅูุชุงุฌ (Vercel):

1. ุงุฐูุจ ุฅูู: https://vercel.com/dashboard
2. ุงุฎุชุฑ ูุดุฑูุน `mothammen-complete`
3. ุงุฐูุจ ุฅูู "Settings" โ "Environment Variables"
4. ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:

| Name | Value | Environment |
|------|-------|-------------|
| `DATABASE_URL` | Connection string ูู Neon | Production, Preview, Development |
| `ADMIN_API_KEY` | ูููุฉ ุณุฑ ูููุฉ ููุฃุฏูู | Production |

5. ุงุถุบุท "Save"
6. Redeploy ุงููุดุฑูุน

---

## 5๏ธโฃ ุชุซุจูุช Dependencies

### ุฅุถุงูุฉ Neon SDK:

```bash
cd mothammen-deploy
npm install @neondatabase/serverless
npm install --legacy-peer-deps
```

---

## 6๏ธโฃ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

### ุงุฎุชุจุงุฑ ูุญูู:

```bash
# ุชุดุบูู ุงูุชุทุจูู
npm run dev

# ุงูุชุญ ุงููุชุตูุญ
http://localhost:5173

# ุฌุฑุจ ุงูุชุณุฌูู
ุงุฐูุจ ุฅูู: http://localhost:5173 โ "ุณุฌู ุงูุขู"
```

### ุงุฎุชุจุงุฑ ุงูุฅูุชุงุฌ:

```bash
# ุจุนุฏ ุงููุดุฑ ุนูู Vercel
https://mothammen-complete.vercel.app

# ุฌุฑุจ ุงูุชุณุฌูู
ุงุถุบุท "ุณุฌู ุงูุขู" ูุฃุฏุฎู ุจูุงูุงุชู
```

---

## 7๏ธโฃ ุงููุตูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

### ุงูุทุฑููุฉ ุงูุขููุฉ:

1. ุงูุชุญ ุงููุชุตูุญ
2. ุงุฐูุจ ุฅูู: `https://your-domain.vercel.app/admin`
3. ุณููุทูุจ ููู ุฅุฏุฎุงู API Key
4. ุฃุฏุฎู ุงูู `ADMIN_API_KEY` ุงูุฐู ุฃุถูุชู ูู Environment Variables
5. ุงุญูุธู ูู localStorage ููุฏุฎูู ุงูุชููุงุฆู

### ูุง ุณุชุฑุงู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:

#### ๐ ูุธุฑุฉ ุนุงูุฉ:
- ุฅุฌูุงูู ุงููุณุชุฎุฏููู
- ุงูุฅุญุงูุงุช ุงููุงุฌุญุฉ
- ุงูุฅูุฑุงุฏุงุช ุงูุดูุฑูุฉ
- ุนุฏุฏ ุงูุชููููุงุช
- ุฑุณู ุจูุงูู ููููู
- ุฃูุซุฑ ุงููุฏู ูุดุงุทุงู

#### ๐ฅ ุงููุณุชุฎุฏููู:
- ูุงุฆูุฉ ูุงููุฉ ุจุงููุณุชุฎุฏููู
- ุชูุฒูุน ุงูุงุดุชุฑุงูุงุช
- ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ

#### ๐ ุงูุฅุญุงูุงุช:
- ุฌููุน ุงูุฅุญุงูุงุช
- ุฃูุถู ุงูููุญูููู
- ุฅุญุตุงุฆูุงุช ุงูููุงูุขุช

#### ๐ฐ ุงูุงุดุชุฑุงูุงุช:
- ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ
- ุงูุฅูุฑุงุฏุงุช
- ุงูุชุญูููุงุช ุงููุงููุฉ

#### ๐ ุงูุชููููุงุช:
- ุฌููุน ุงูุชููููุงุช
- ุฅุญุตุงุฆูุงุช ุงููุฏู
- ูุชูุณุท ูููุฉ ุงูุนูุงุฑุงุช

#### ๐ ุงููุดุงุทุงุช:
- ุขุฎุฑ ุงููุดุงุทุงุช ูู ุงูุชุทุจูู
- ุณุฌู ุงูุฃุญุฏุงุซ

---

## 8๏ธโฃ ุงูุจููุฉ ุงูุชุญุชูุฉ

### ุงูุฌุฏุงูู ุงููููุดุฃุฉ:

1. **users** - ุงููุณุชุฎุฏููู ุงููุณุฌููู
2. **referrals** - ุงูุฅุญุงูุงุช ูุงูููุงูุขุช
3. **subscriptions** - ุงูุงุดุชุฑุงูุงุช ุงููุฏููุนุฉ
4. **evaluations** - ุชููููุงุช ุงูุนูุงุฑุงุช
5. **activity_log** - ุณุฌู ุงููุดุงุทุงุช

### Views (ููุชุญูููุงุช):

1. **user_stats** - ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏููู
2. **referral_stats** - ุฅุญุตุงุฆูุงุช ุงูุฅุญุงูุงุช
3. **top_referrers** - ุฃูุถู ุงูููุญูููู
4. **revenue_stats** - ุฅุญุตุงุฆูุงุช ุงูุฅูุฑุงุฏุงุช

### Triggers (ุขูู):

1. **update_updated_at** - ุชุญุฏูุซ `updated_at` ุชููุงุฆูุงู
2. **apply_referral_reward** - ุชุทุจูู ููุงูุฃุฉ ุงูุฅุญุงูุฉ ุชููุงุฆูุงู

---

## 9๏ธโฃ API Endpoints ุงููุชุงุญุฉ

### ุงูุชุณุฌูู:
```
POST /api/auth/register
Body: { name, email, phone, referredByCode? }
```

### ุฅุญุตุงุฆูุงุช ุงูุฃุฏูู:
```
GET /api/admin/stats
Headers: { x-api-key: YOUR_ADMIN_API_KEY }
```

---

## ๐ ูุตุงุฆุญ ุงูุฃูุงู

### โ ุงูุนู:
- ุงุณุชุฎุฏู HTTPS ุฏุงุฆูุงู
- ุงุญูุธ `ADMIN_API_KEY` ุจุดูู ุขูู
- ูุง ุชุดุงุฑู Connection String
- ูุนูู Row Level Security ูู Neon (ุงุฎุชูุงุฑู)

### โ ูุง ุชูุนู:
- ูุง ุชุฑูุน `.env.local` ุนูู GitHub
- ูุง ุชุดุงุฑู API Keys ุนููุงู
- ูุง ุชุณุชุฎุฏู ูููุงุช ุณุฑ ุถุนููุฉ

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ: "DATABASE_URL is not defined"

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฅุถุงูุฉ `DATABASE_URL` ูู `.env.local`
- ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ุจุนุฏ ุฅุถุงูุฉ ุงููุชุบูุฑ

### ุงููุดููุฉ: "Connection timeout"

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู Connection String ุตุญูุญ
- ุชุฃูุฏ ูู ุฅุถุงูุฉ `?sslmode=require` ูู ููุงูุฉ ุงูุฑุงุจุท
- ุชุญูู ูู ุฃู Neon project ูุดุท (Free tier ููุงู ุจุนุฏ ูุชุฑุฉ)

### ุงููุดููุฉ: "Unauthorized" ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฅุถุงูุฉ `ADMIN_API_KEY` ูู Environment Variables
- ุชุฃูุฏ ูู ุฅุฏุฎุงู ููุณ ุงููููุฉ ุนูุฏ ุงูุฏุฎูู

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [Neon Documentation](https://neon.tech/docs)
- [Neon + Vercel Integration](https://neon.tech/docs/guides/vercel)
- [PostgreSQL Tutorial](https://www.postgresql.org/docs/)

---

## โ ุงูุฎูุงุตุฉ

ุจุนุฏ ุฅุชูุงู ูุฐู ุงูุฎุทูุงุช:
- โ ูุงุนุฏุฉ ุจูุงูุงุช Neon ุฌุงูุฒุฉ
- โ ุงูุชุทุจูู ูุฑุจูุท ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุธุงู ุงูุชุณุฌูู ูุงูุฅุญุงูุงุช ูุนูู
- โ ููุญุฉ ุงูุฅุฏุงุฑุฉ ุฌุงูุฒุฉ
- โ API Endpoints ุชุนูู

**ุงูุชุทุจูู ุงูุขู ุฌุงูุฒ ููุฅูุชุงุฌ! ๐**

